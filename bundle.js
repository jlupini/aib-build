(()=>{"use strict";var t={208:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(601),i=n.n(o),r=n(314),s=n.n(r)()(i());s.push([t.id,'body {\n  background-color:#FAF9F7;\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 400;\n  font-style: normal;\n}\n\nnav {\n  background-color: #fff;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);\n  padding: 22px 0;\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  z-index: 1000;\n  display: flex;\n}\n\nmain {\n  padding: 100px 100px;\n  position: relative;\n  z-index: 500;\n  min-height: 1000px; /* force scrollable for demo purposes */\n  pointer-events: none;\n}\n\nmain > .content-block { \n  pointer-events: auto;\n}\n\nmain .spacer-block {\n  height: 1000px;\n}\n\n#controls {\n  display: flex;\n  position: relative;\n  width: auto;\n  flex: 1 1 auto;\n  text-align: right;\n}\n\n#controls > * {\n  flex: 1 1 auto;\n  margin: 5px 10px;\n}\n\n.aib-logo {\n  text-align: left;\n  height: 52px;\n  /* flex: 1 1 auto; */\n}\n\n.aib-logo img {\n  display: inline-block;\n  margin: 0 auto;\n  padding: 0 20px;\n  height: 100%;\n}\n\n.content-block {\n  position: relative;\n  z-index: 800;\n  background-color: rgba(255, 255, 255, 0.8);\n  padding: 30px;\n  width: 50%;\n  margin: 200px auto 1000px;\n  border-radius: 10px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.1);\n}\n\n#chart1 {\n  position: fixed;\n  padding-top: 100px;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100vh;\n  z-index: 100;\n}\n\nsvg {\n  overflow: visible;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n}\n\n.font-book {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 400;\n  font-style: normal;\n}\n\n.font-book-italic {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 400;\n  font-style: italic;\n}\n\n.font-medium {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 500;\n  font-style: normal;\n}\n\n.font-medium-italic {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 500;\n  font-style: italic;\n}\n\n.font-bold {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 700;\n  font-style: normal;\n}\n\n.font-bold-italic {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 700;\n  font-style: italic;\n}\n\n.font-extra-bold {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 800;\n  font-style: normal;\n}\n\n.font-extra-bold-italic {\n  font-family: "p22-mackinac-pro", serif;\n  font-weight: 800;\n  font-style: italic;\n}',""]);const a=s},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,i,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);o&&s[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},601:t=>{t.exports=function(t){return t[1]}},511:(t,e,n)=>{n.r(e),n.d(e,{default:()=>O});var o=n(72),i=n.n(o),r=n(825),s=n.n(r),a=n(659),c=n.n(a),l=n(56),u=n.n(l),d=n(540),p=n.n(d),f=n(113),g=n.n(f),h=n(208),y={};y.styleTagTransform=g(),y.setAttributes=u(),y.insert=c().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=p(),i()(h.A,y);const O=h.A&&h.A.locals?h.A.locals:void 0},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var r={},s=[],a=0;a<t.length;a++){var c=t[a],l=o.base?c[0]+o.base:c[0],u=r[l]||0,d="".concat(l," ").concat(u);r[l]=u+1;var p=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var g=i(f,o);o.byIndex=a,e.splice(a,0,{identifier:d,updater:g,references:1})}s.push(d)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var r=o(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=n(r[s]);e[a].references--}for(var c=o(t,i),l=0;l<r.length;l++){var u=n(r[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}r=c}}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},921:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_RING_RADIUS=e.RING_SPACING=e.MIN_RING_SIZE=e.CURSOR_NODE_DATA=e.VOTER_GROUPS=e.VOTER_TYPES=e.VOTER_TYPE_KEYS=e.targetColumn=e.COLLIDE_DISTANCE_MULT=e.MOUSE_CHARGE_STRENGTH=e.DOT_CHARGE_STRENGTH=e.GROUPED_FORCE_STRENGTH=e.RADIAL_STRENGTH=e.smallDotRadius=e.largeDotRadius=void 0;const o=n(613);e.largeDotRadius=5,e.smallDotRadius=2,e.RADIAL_STRENGTH=.3,e.GROUPED_FORCE_STRENGTH=.1,e.DOT_CHARGE_STRENGTH=-.75,e.MOUSE_CHARGE_STRENGTH=-250,e.COLLIDE_DISTANCE_MULT=1.2,e.targetColumn="Average 2016-2022 Dots",e.VOTER_TYPE_KEYS={"Eligible non-voters":"ELIGIBLE_NON_VOTERS","Non-donating voters":"NON_DONATING_VOTERS","Donors >$1000":"DONORS_OVER_1000","Donors $500-999":"DONORS_500_999","Donors $200-499":"DONORS_200_499","Donors $1-199":"DONORS_1_199"},e.VOTER_TYPES={ELIGIBLE_NON_VOTERS:new o.VoterType("Eligible non-voters","Eligible voters who don't vote","#ABABAB"),NON_DONATING_VOTERS:new o.VoterType("Non-donating voters","Non-donating voters","#833B8D"),DONORS_OVER_1000:new o.VoterType("Donors >$1000","Huge Donors (>$1000)","#FFC803"),DONORS_500_999:new o.VoterType("Donors $500-999","Large Donors ($500-$999)","#67D7BE"),DONORS_200_499:new o.VoterType("Donors $200-499","Medium Donors ($200-$499)","#64C1CD"),DONORS_1_199:new o.VoterType("All Voters","Small Donors ($1-$199)","#5899EA"),MOUSE:new o.VoterType("MOUSE","Mouse","green")},e.VOTER_GROUPS={},Object.keys(e.VOTER_TYPES).forEach((t=>{e.VOTER_GROUPS[t]=o.VoterGroup.fromType(e.VOTER_TYPES[t])})),e.VOTER_GROUPS.DONORS_1_999=new o.VoterGroup([e.VOTER_TYPES.DONORS_1_199,e.VOTER_TYPES.DONORS_200_499,e.VOTER_TYPES.DONORS_500_999],"Donors $1-999","Donors $1-999"),e.VOTER_GROUPS.ALL_DONORS=o.VoterGroup.fromGroups([e.VOTER_GROUPS.DONORS_1_999,e.VOTER_GROUPS.DONORS_OVER_1000],"All Donors","All Donors"),e.VOTER_GROUPS.ALL_VOTERS=o.VoterGroup.fromGroups([e.VOTER_GROUPS.ALL_DONORS,e.VOTER_GROUPS.NON_DONATING_VOTERS],"All Voters","All Voters"),e.VOTER_GROUPS.EVERYONE=o.VoterGroup.fromGroups([e.VOTER_GROUPS.ALL_VOTERS,e.VOTER_GROUPS.ELIGIBLE_NON_VOTERS],"Everyone","Everyone"),e.CURSOR_NODE_DATA={id:"cursor-node",type:e.VOTER_TYPES.MOUSE,x:0,y:0,fx:0,fy:0},e.MIN_RING_SIZE=20,e.RING_SPACING=10,e.MAX_RING_RADIUS=150},646:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.loadVoterData=async function(t){const e=await o.csv(t,(t=>{const e=t.Group;if(!i.VOTER_TYPE_KEYS[e])return null;const n=i.VOTER_TYPE_KEYS[e];return i.VOTER_TYPES[n].dotCount=+t["Average 2016-2022 Dots"],i.VOTER_TYPES[n]}));return Object.keys(i.VOTER_GROUPS).forEach((t=>{i.VOTER_GROUPS[t].updateDotCount()})),e},e.flattenData=function(t){const e=[];return t.forEach((t=>{for(let n=0;n<t.dotCount;n++)e.push({id:`${t.id}-${n}`,type:t})})),e},e.updateDisplayData=function(t){r.state.displayData=r.state.flattenedData.slice(),t?(r.state.displayData=r.state.displayData.filter((e=>e.type.belongsInView(t))),r.state.displayData.forEach((e=>{e.activeClump=e.type.matchedClumpInView(t)})),(0,s.addCursorNode)()):(0,s.addCursorNode)()};const o=window.d3,i=n(921),r=n(569),s=n(517)},795:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.initEventListeners=function(){(function(){const t=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const e=t.target.id;e&&r.viewPresets[e]?((0,i.setView)(r.viewPresets[e]),console.log(`Triggered view change to ${e}`)):console.log(`No matching view preset found for ${e}`)}}))}),{root:null,rootMargin:"0px",threshold:.5});document.querySelectorAll(".trigger-div").forEach((e=>{t.observe(e)}))})(),o.select("#view-1").on("click",(()=>{(0,i.setView)(r.viewPresets.everyoneCloud)})),o.select("#view-2").on("click",(()=>{(0,i.setView)(r.viewPresets.allVotersCloud)})),o.select("#view-3").on("click",(()=>{(0,i.setView)(r.viewPresets.onlyVotersBullseye)})),o.select("#view-4").on("click",(()=>{(0,i.setView)(r.viewPresets.donorFlowNow)})),o.select("#pause-simulation").on("click",(()=>i.state.simulation.stop())),o.select("#resume-simulation").on("click",(()=>i.state.simulation.restart())),o.select("#toggle-link").on("click",(()=>{(0,s.toggleLinks)()})),o.select("#toggle-group-links").on("click",(()=>{(0,s.toggleGroupLinks)()})),o.select("#add-top-icon").on("click",(()=>{(0,s.addTopIconWithLinks)()}))};const o=window.d3,i=n(569),r=n(306),s=n(114)},185:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkManager=void 0;const o=window.d3,i=n(569),r=n(114),s=n(160),a={colorScheme:{standard:"rgba(80, 255, 100, 0.4)",special:"rgba(80, 255, 100, 0.6)"},transitionDurations:{enter:700,update:300,exit:700},specialLinkDelay:500,icons:[],linkSets:[]};e.LinkManager=class{links=[];activeLinkSets=new Map;linksGroup=null;dotsGroup=null;config;useGroupLinks=!1;verticalLinkGenerator;constructor(t={}){this.linksGroup=i.state.svgGroups.linksGroup,this.dotsGroup=i.state.svgGroups.dotsGroup,this.config={...a,...t},this.verticalLinkGenerator=this.createVerticalLinkGenerator()}createVerticalLinkGenerator(){const t=o.linkVertical().x((function(t){return t&&"number"==typeof t.x?t.x:0})).y((function(t){return t&&"number"==typeof t.y?t.y:0}));return function(e){if(!e||!e.source||!e.target)return"M0,0L0,0";try{return t(e)??"M0,0L0,0"}catch(t){return"M0,0L0,0"}}}toggleLinkSet(t){const e=this.config.linkSets.find((e=>e.id===t));if(!e)return console.warn(`Link set ${t} not found in config`),!1;if(this.activeLinkSets.get(t))return this.removeLinkSet(t),!1;const n=i.state.icons.find((t=>t.id===e.iconId));if(!n?.active&&!(0,r.addIcon)(e.iconId))return console.warn(`Failed to add icon ${e.iconId} for link set ${t}`),!1;if(!i.state.displayData.length)return console.warn("No display data found"),!1;const o=e.sourceGroupWeights.map((e=>({group:e.group,percentage:e.percentage,thickness:0,linkSetId:t})));return this.calculateDotThicknesses(o,e.totalThickness),this.useGroupLinks?this.createGroupLinksForSet(e):this.createLinksBetweenDotsAndIcon(e,o),this.activeLinkSets.set(t,!0),this.renderLinks(),!0}removeLinkSet(t){this.links.filter((e=>e.id.startsWith(`${t}-`)||e.id.startsWith(`${t}-special-`))).length>0&&(this.linksGroup?.selectAll("path.link").filter((e=>e.id.startsWith(`${t}-`)||e.id.startsWith(`${t}-special-`))).transition().duration(this.config.transitionDurations.exit).style("opacity",0).remove(),this.links=this.links.filter((e=>!e.id.startsWith(`${t}-`)&&!e.id.startsWith(`${t}-special-`)))),this.activeLinkSets.set(t,!1);const e=this.config.linkSets.find((e=>e.id===t)),n=i.state.icons.find((t=>t.id===e?.iconId));n&&n.active&&(0,r.removeIcon)(n.id),Array.from(this.activeLinkSets.values()).every((t=>!t))&&(0,s.clearAllSuperdots)()}calculateDotThicknesses(t,e){t.forEach((t=>{const n=t.group.dotCount;t.thickness=e*t.percentage/n}))}createLinksBetweenDotsAndIcon(t,e){const n=i.state.icons.find((e=>e.id===t.iconId));if(!n)return void console.warn(`Icon ${t.iconId} not found for link set ${t.id}`);const o=void 0!==t.connectionY?t.connectionY:n.connectionPoint?n.position.y+n.connectionPoint.y:n.position.y,r=i.state.displayData.filter((t=>t.type.belongsInGroups(e.map((t=>t.group)))));r.sort(((t,e)=>(t.x??0)-(e.x??0)));const s=new Map;r.forEach((t=>{const n=e.find((e=>e.group.containsType(t.type)))?.thickness||1;s.set(t.id,n)}));const a=this.calculateJunctionPositions(r,s,n.position.x,o,t.totalThickness),c="to-icon"===t.direction;r.forEach(((e,n)=>{const o=s.get(e.id)||1,i={x:a[n].x,y:a[n].y,isFixed:!0,index:n,linkSetId:t.id},r={id:`${t.id}-link-${n}`,source:c?e:i,target:c?i:e,width:o,linkSetId:t.id};this.links.push(r)})),this.createConnectorLink(t.id,n.position.x,c?o:n.position.y,n.position.x,c?n.position.y:o,t.totalThickness,t.color??this.config.colorScheme.standard)}createConnectorLink(t,e,n,o,i,r,s){const a={id:`${t}-special-link`,source:{x:e,y:n,isFixed:!0,linkSetId:t},target:{x:o,y:i,isFixed:!0,linkSetId:t},width:r,linkSetId:t};this.links.push(a)}calculateJunctionPositions(t,e,n,o,i){const r=[];let s=0;t.forEach((t=>{s+=e.get(t.id)||1}));const a=i/s;let c=n-i/2;return t.forEach((t=>{const n=(e.get(t.id)||1)*a;r.push({x:c+n/2,y:o}),c+=n})),r}updateLinkTargetPositions(t,e,n,o){if(t&&void 0!==e&&void 0!==n&&void 0!==o){const i=this.links.filter((e=>e.id.startsWith(`${t}-link-`)));let r=e-o/2;return void i.sort(((t,e)=>this.getLinkIndex(t)-this.getLinkIndex(e))).forEach((t=>{const e=t.width,o=t.target;o.x=r+e/2,o.y=n,o.isFixed=!0,r+=e}))}const r=new Map;this.links.forEach((t=>{const e=t.id.match(/^([^-]+)-link-/);if(e&&e[1]){const n=e[1];r.has(n)||r.set(n,[]),r.get(n)?.push(t)}})),r.forEach(((t,e)=>{const n=this.config.linkSets.find((t=>t.id===e));if(!n)return;const o=i.state.icons.find((t=>t.id===n.iconId));if(!o)return;const r=void 0!==n.connectionY?n.connectionY:o.connectionPoint?o.position.y+o.connectionPoint.y:o.position.y;this.updateLinkTargetPositions(e,o.position.x,r,n.totalThickness)}))}getLinkIndex(t){const e=t.id.match(/-link-(\d+)$/);return e&&e[1]?parseInt(e[1],10):0}renderLinks(){const t=this.linksGroup?.selectAll("path.link").data(this.links);t?.enter().append("path").lower().attr("class","link").attr("stroke",(t=>{const e=this.config.linkSets.find((e=>e.id===t.linkSetId));return e?.color||this.config.colorScheme.standard})).attr("fill","none").attr("stroke-width",(t=>t.width)).attr("d",(t=>this.verticalLinkGenerator(t))).style("opacity",0).transition("link-draw").delay((t=>"special-link"===t.id?this.config.specialLinkDelay:0)).duration(this.config.transitionDurations.enter).ease(o.easeQuadOut).style("opacity",1),t?.attr("stroke-width",(t=>t.width)).transition().duration(this.config.transitionDurations.update).attr("d",(t=>this.verticalLinkGenerator(t))),t?.exit().transition("remove-link").duration(this.config.transitionDurations.exit).style("opacity",0).remove()}clearAll(){this.activeLinkSets.forEach(((t,e)=>{this.removeLinkSet(e)})),this.links=[],this.activeLinkSets.clear()}addLinkSetConfig(t){return this.config.linkSets.some((e=>e.id===t.id))?(console.warn(`Link set with ID ${t.id} already exists`),!1):i.state.icons.some((e=>e.id===t.iconId))?(this.config.linkSets.push(t),!0):(console.warn(`Icon ${t.iconId} not found for link set ${t.id}`),!1)}linkSetExists(t){return this.config.linkSets.some((e=>e.id===t))}toggleGroupLinks(){if(!i.state.view)return console.warn("No active view found. Cannot toggle group links."),!1;let t=0;return this.activeLinkSets.forEach(((e,n)=>{e&&t++})),this.links.length||0!==t?(this.useGroupLinks=!this.useGroupLinks,(0,s.clearAllSuperdots)(),this.preserveSpecialLinks(),this.useGroupLinks?this.recreateAllAsGroupLinks():this.recreateAllAsIndividualLinks(),this.renderLinks(),!0):(console.log("No active link sets found. Create links first with the Toggle Link button."),!1)}recreateAllAsGroupLinks(){this.activeLinkSets.forEach(((t,e)=>{const n=this.config.linkSets.find((t=>t.id===e));n&&this.createGroupLinksForSet(n)}))}recreateAllAsIndividualLinks(){this.activeLinkSets.forEach(((t,e)=>{const n=this.config.linkSets.find((t=>t.id===e));if(n){const t=n.sourceGroupWeights.map((t=>({group:t.group,percentage:t.percentage,thickness:0,linkSetId:n.id})));this.calculateDotThicknesses(t,n.totalThickness),this.createLinksBetweenDotsAndIcon(n,t)}}))}preserveSpecialLinks(){this.links.filter((t=>t.id.includes("-special-"))).map((t=>({...t}))),this.linksGroup?.selectAll("path.link").transition().duration(300).style("opacity",0).remove(),this.linksGroup?.selectAll("path.link").remove(),this.links=[]}preserveSpecialLink(){const t=this.links.find((t=>"special-link"===t.id)),e=t?{...t}:null;this.linksGroup?.selectAll("path.link").filter((t=>"special-link"!==t.id)).transition().duration(300).style("opacity",0).remove(),this.links=[],e&&this.links.push(e)}createGroupLinksForSet(t){if(!i.state.view)return;const e=i.state.icons.find((e=>e.id===t.iconId));if(!e)return void console.warn(`Icon ${t.iconId} not found for link set ${t.id}`);const n=void 0!==t.connectionY?t.connectionY:e.connectionPoint?e.position.y+e.connectionPoint.y:e.position.y,o=i.state.view.clumps,r=t.sourceGroupWeights;let a=[];o.forEach((t=>{let e=0;r.forEach((n=>{n.group.belongsInClump(t)&&(e+=n.percentage)})),a.push(e)}));const c=(0,s.createSuperdots)(o);if(!c)return;const l=a.map((e=>e*t.totalThickness)),u=this.calculateGroupJunctionPositions(l,e.position.x,n,t.totalThickness);this.createSuperdotJunctionLinks(t,c,u,l),this.createConnectorLink(t.id,e.position.x,"to-icon"===t.direction?n:e.position.y,e.position.x,"to-icon"===t.direction?e.position.y:n,t.totalThickness,t.color??this.config.colorScheme.standard);const d=c.filter(((t,e)=>a[e]>0));(0,s.renderSuperdots)(d)}calculateGroupJunctionPositions(t,e,n,o){const i=[];let r=e-o/2;return t.forEach(((t,e)=>{i.push({x:r+t/2,y:n,groupIndex:e}),r+=t})),i}createSuperdotJunctionLinks(t,e,n,o){const i="to-icon"===t.direction;n.forEach(((n,r)=>{const s=o[r],a={x:e[r].x,y:e[r].y,groupIndex:e[r].groupIndex,isGroupSource:!0,linkSetId:t.id},c={x:n.x,y:n.y,isFixed:!0,linkSetId:t.id},l={id:`${t.id}-dotgroup-link-${e[r].groupIndex}`,source:i?a:c,target:i?c:a,width:s,linkSetId:t.id};this.links.push(l)}))}tick(){try{this.useGroupLinks&&this.links.length>0&&i.state.view&&this.updateGroupLinkPositions(),this.updateLinkTargetPositions(),this.linksGroup?.selectAll(".link").attr("d",(t=>this.verticalLinkGenerator(t))),this.updateZOrder()}catch(t){console.warn(`Error in link tick function: ${t}`)}}updateGroupLinkPositions(){if(!i.state.view)return;const t=i.state.view.clumps;this.links.forEach((e=>{if("special-link"===e.id)return;const n=e.id.match(/dotgroup-link-(\d+)/);if(n){const o=parseInt(n[1],10);if(o>=0&&o<t.length){const n=t[o];if(n){let t=0,r=0,a=0;if(i.state.displayData.forEach((e=>{e.activeClump===n&&(t+=e.x||0,r+=e.y||0,a++)})),a>0){const i=t/a,c=r/a,l=e.source;l.x=i,l.y=c,(0,s.updateSuperdot)(o,i,c,n)}}}}}))}updateZOrder(){this.useGroupLinks&&this.dotsGroup&&(this.linksGroup?.lower(),this.dotsGroup.selectAll("circle.superdot").lower(),this.dotsGroup.selectAll("circle:not(.superdot)").raise())}ensureLinkVisibility(){try{this.linksGroup?.selectAll(".link").style("display","block").style("visibility","visible")}catch(t){console.warn("Error ensuring link visibility:",t)}}getLinks(){return this.links}isUsingGroupLinks(){return this.useGroupLinks}}},114:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.initVisualization=function(t){const e=o.select(`#${t}`).append("svg").attr("width",i.state.svgWidth).attr("height",i.state.svgHeight);return i.state.svgGroups.rearAnnotationsGroup=e.append("g").attr("class","rear-annotations"),i.state.svgGroups.linksGroup=e.append("g").attr("class","links"),i.state.svgGroups.dotsGroup=e.append("g").attr("class","dots"),i.state.svgGroups.imgGroup=e.append("g").attr("class","images"),i.state.svg=e,e.selectAll("circle").data(i.state.displayData.slice(1)).enter().append("circle").attr("r",i.state.dotRadius).attr("fill",(function(t){return t.primaryGroup.color||"#000"})),e.on("pointermove",p),e.on("pointerout",f),a=new s.LinkManager,a&&a.ensureLinkVisibility(),e.on("transitionend",(function(){a&&a.ensureLinkVisibility()})),e},e.renderView=function(t){i.state.svgGroups.dotsGroup&&(i.state.svgGroups.dotsGroup.selectAll("circle").data(i.state.displayData.slice(1),(t=>t.id)).join((t=>t.append("circle").attr("r",0).attr("fill",(t=>t.type.color||"#000")).style("opacity",0).transition("add-circles").duration(300).attr("r",i.state.dotRadius).style("opacity",(t=>t.activeClump?.render?.opacity||1))),(t=>t.transition("update-circles").duration(300).attr("fill",(t=>t.type.color||"#000")).attr("r",i.state.dotRadius).style("opacity",(t=>t.activeClump?.render?.opacity||1))),(t=>t.transition("remove-circles").duration(300).style("opacity",0).remove())),t.links&&(t.links.partyLinks&&l(),t.links.parliamentLinks&&d(),t.links.finalLinks&&u()))},e.addIconConfig=c,e.addIcon=function(t){if(!i.state.svgGroups.imgGroup)return console.warn("Image group not found in SVG groups"),!1;const e=i.state.icons.find((e=>e.id===t));if(!e)return console.warn(`Icon ${t} not found in config`),!1;if(void 0!==e.active&&e.active)return console.warn(`Icon ${t} is already active`),!1;const n=i.state.svgGroups.imgGroup.append("image").attr("class",`icon-${t}`).attr("href",e.imageUrl).attr("x",e.position.x).attr("y",e.position.y).attr("transform",`translate(-${e.size.width/2}, -${e.size.height/2})`).attr("width",e.size.width).attr("height",e.size.height);if(e.rotation){const t=window.scrollY;n?.style("transform-box","fill-box").style("transform-origin","center").style("transform",`translate(-50%, -50%) rotate(${.1*t}deg)`);const e=()=>{const t=window.scrollY;n?.style("transform",`translate(-50%, -50%) rotate(${.1*t}deg)`)};i.state.listeners.push({type:"scroll",callback:e}),window.addEventListener("scroll",e)}return e.active=!0,!0},e.removeIcon=function(t){i.state.svgGroups.imgGroup?.selectAll(`.icon-${t}`).transition().duration(400).style("opacity",0).remove(),i.state.icons.forEach((e=>{e.id===t&&(e.active=!1)})),i.state.listeners.forEach((t=>{window.removeEventListener(t.type,t.callback)})),i.state.listeners=[]},e.toggleLinks=l,e.toggleFinalLinks=u,e.toggleGroupLinks=function(){return!!a&&a.toggleGroupLinks()},e.ensureLinkVisibility=function(){a&&a.ensureLinkVisibility()},e.addTopIconWithLinks=d,e.ticked=function(){try{i.state.svgGroups.dotsGroup?.selectAll("circle:not(.superdot)").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),a&&a.tick()}catch(t){console.warn(`Error in tick function: ${t}`)}},e.pointerMoveHandler=p,e.pointerOutHandler=f,e.calculateGroupCenters=function(t){const e=[];return t.forEach(((t,n)=>{let o=0,r=0,s=0;i.state.displayData.forEach((e=>{e.type.belongsInClump(t)&&(o+=e.x||0,r+=e.y||0,s++)})),s>0&&e.push({groupIndex:n,x:o/s,y:r/s})})),e};const o=window.d3,i=n(569),r=n(921),s=n(185);let a=null;function c(t){return i.state.icons.some((e=>e.id===t.id))?(console.warn(`Icon with ID ${t.id} already exists`),!1):(i.state.icons.push(t),!0)}function l(){return!!a&&(a.linkSetExists("groups-to-party")||(c({id:"bot-party-icon",imageUrl:"assets/img/parties-icon-v03.svg",position:{x:350,y:600},size:{width:100,height:100},rotation:!0,connectionPoint:{y:-100}}),a.addLinkSetConfig({id:"groups-to-party",iconId:"bot-party-icon",direction:"to-icon",totalThickness:50,sourceGroupWeights:[{group:r.VOTER_GROUPS.DONORS_1_199,percentage:.1},{group:r.VOTER_GROUPS.DONORS_200_499,percentage:.2},{group:r.VOTER_GROUPS.DONORS_500_999,percentage:.2},{group:r.VOTER_GROUPS.DONORS_OVER_1000,percentage:.5}]})),a.toggleLinkSet("groups-to-party"))}function u(){return!!a&&(a.linkSetExists("party-to-groups-2")||(c({id:"top-party-icon-2",imageUrl:"assets/img/parliament-v01.svg",position:{x:350,y:100},size:{width:600,height:200},rotation:!1,connectionPoint:{y:150}}),a.addLinkSetConfig({id:"party-to-groups-2",iconId:"top-party-icon-2",direction:"to-icon",totalThickness:25,sourceGroupWeights:[{group:r.VOTER_GROUPS.NON_DONATING_VOTERS,percentage:.6},{group:r.VOTER_GROUPS.DONORS_1_199,percentage:.1},{group:r.VOTER_GROUPS.DONORS_200_499,percentage:.1},{group:r.VOTER_GROUPS.DONORS_500_999,percentage:.1},{group:r.VOTER_GROUPS.DONORS_OVER_1000,percentage:.1}]})),a.linkSetExists("groups-to-party-2")||(c({id:"bot-party-icon-2",imageUrl:"assets/img/parties-icon-v03.svg",position:{x:350,y:600},size:{width:100,height:100},rotation:!0,connectionPoint:{y:-100}}),a.addLinkSetConfig({id:"groups-to-party-2",iconId:"bot-party-icon-2",direction:"to-icon",totalThickness:50,sourceGroupWeights:[{group:r.VOTER_GROUPS.NON_DONATING_VOTERS,percentage:.6},{group:r.VOTER_GROUPS.DONORS_1_199,percentage:.1},{group:r.VOTER_GROUPS.DONORS_200_499,percentage:.1},{group:r.VOTER_GROUPS.DONORS_500_999,percentage:.1},{group:r.VOTER_GROUPS.DONORS_OVER_1000,percentage:.1}]})),a.toggleLinkSet("party-to-groups-2"),a.toggleLinkSet("groups-to-party-2"))}function d(t=!1){return!!a&&(a.linkSetExists("party-to-groups")||(c({id:"top-party-icon",imageUrl:"assets/img/parliament-v01.svg",position:{x:350,y:100},size:{width:600,height:200},rotation:!1,connectionPoint:{y:150}}),a.addLinkSetConfig({id:"party-to-groups",iconId:"top-party-icon",direction:"to-icon",totalThickness:25,sourceGroupWeights:[{group:r.VOTER_GROUPS.DONORS_1_199,percentage:.1},{group:r.VOTER_GROUPS.DONORS_200_499,percentage:.2},{group:r.VOTER_GROUPS.DONORS_500_999,percentage:.2},{group:r.VOTER_GROUPS.DONORS_OVER_1000,percentage:.5}]})),a.toggleLinkSet("party-to-groups"))}function p(t){if(!i.state.cursorNode)return;const[e,n]=o.pointer(t);i.state.cursorNode.fx=e,i.state.cursorNode.fy=n,i.state.simulation.alpha(1).restart()}function f(){i.state.cursorNode&&(i.state.cursorNode.fx=-1e3,i.state.cursorNode.fy=-1e3),i.state.simulation.alpha(1).restart()}o.linkHorizontal().x((function(t){return t.x})).y((function(t){return t.y}))},517:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.initSimulation=function(){(0,a.updateDisplayData)(),r.state.simulation=o.forceSimulation(r.state.displayData).alpha(1).alphaTarget(.1).velocityDecay(.3).on("tick",i.ticked),o.select("body")},e.simulateView=function(t){if(console.log("Simulating view",t),!t)return void console.error("Error: view undefined!");(0,a.updateDisplayData)(t),r.state.dotRadius=t.dotRadius;let e=t.forceStrength?.collide||r.state.dotRadius*s.COLLIDE_DISTANCE_MULT,n=t.forceStrength?.charge||r.state.dotRadius*s.DOT_CHARGE_STRENGTH;t.forceStrength?.chargeMultiplier&&(n*=t.forceStrength.chargeMultiplier),t.forceStrength?.collideMultiplier&&(e*=t.forceStrength.collideMultiplier);const i=t.forceStrength?.standard||s.GROUPED_FORCE_STRENGTH,c=t.forceStrength?.radial||s.RADIAL_STRENGTH;r.state.simulation.force("x",o.forceX((e=>"custom"===e.activeClump?.force.type?e.activeClump.force.center?.x??r.state.svgWidth/2:t.center?t.center.x:r.state.svgWidth/2)).strength((t=>"custom"===t.activeClump?.force.type?i:0))).force("y",o.forceY((e=>"custom"===e.activeClump?.force.type?e.activeClump.force.center?.y??r.state.svgHeight/2:t.center?t.center.y:r.state.svgHeight/2)).strength((t=>"custom"===t.activeClump?.force.type?i:0))).force("radial",o.forceRadial((t=>{if("radial"===t.activeClump?.force.type){const e=t.activeClump.force.boundary;return e.inner+Math.random()*(e.outer-e.inner)}return 0}),t.center?.x||r.state.svgWidth/2,t.center?.y||r.state.svgHeight/2).strength((t=>"radial"===t.activeClump?.force.type?c:0))),r.state.simulation.force("collide",o.forceCollide(e).iterations(3)).force("charge",o.forceManyBody().strength(((t,e)=>0===e?r.state.dotRadius*s.MOUSE_CHARGE_STRENGTH:n))),r.state.simulation.nodes(r.state.displayData),r.state.simulation.alpha(1).restart()},e.addCursorNode=function(){const t=s.CURSOR_NODE_DATA;r.state.displayData.unshift(t),r.state.cursorNode=t},e.removeCursorNode=function(){r.state.cursorNode&&(r.state.displayData=r.state.displayData.slice(1),r.state.cursorNode=null)};const o=window.d3,i=n(114),r=n(569),s=n(921),a=n(646)},569:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.state=void 0,e.setView=function(t){e.state.view=t,(0,o.simulateView)(t),(0,i.renderView)(t)};const o=n(517),i=n(114);e.state={importedData:[],displayData:[],flattenedData:[],isDistributed:!1,isSeparate:!1,isAutoRadius:!0,outlinesVisible:!1,view:null,dotRadius:2,superdots:[],icons:[],svg:null,svgWidth:700,svgHeight:700,simulation:null,cursorNode:null,svgGroups:{},listeners:[],toggleGrouping(){this.isDistributed=!this.isDistributed},setDisplayData(t){this.displayData=t},setDotRadius(t){this.dotRadius=t}}},160:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createSuperdots=function(t){if(0===t.length)return;const e=(0,r.calculateGroupCenters)(t),n=[];return e.forEach((e=>{n.push(s(e,t[e.groupIndex]))})),n},e.createSuperdot=s,e.clearAllSuperdots=function(){i.state.svgGroups.dotsGroup?.selectAll("circle.superdot").transition("superdot-remove").duration(650).ease(o.easePolyInOut).attr("r",0).style("opacity",0).remove(),i.state.svgGroups.dotsGroup?.selectAll("circle.superdot").remove(),i.state.superdots=[]},e.renderSuperdots=function(t){if(!i.state.svgGroups.dotsGroup)return;i.state.svgGroups.dotsGroup.selectAll("circle.superdot");const e=i.state.svgGroups.dotsGroup.selectAll("circle.superdot").data(t,(t=>t.id));e.enter().append("circle").attr("class","superdot").attr("id",(t=>t.id)).attr("cx",(t=>isNaN(t.x)?0:t.x)).attr("cy",(t=>isNaN(t.y)?0:t.y)).attr("r",(t=>isNaN(t.radius)?25:t.radius)).attr("fill",(t=>t.fillColor||"rgba(240, 240, 240, 0.7)")).attr("stroke",(t=>t.strokeColor||"#999")).attr("stroke-width",4).style("opacity",1).style("transform-box","fill-box").style("transform-origin","center").style("transform","scale(0.01)").lower().transition("superdot-entry").duration(900).ease(o.easePolyInOut).style("transform","scale(1)"),e.attr("cx",(t=>isNaN(t.x)?0:t.x)).attr("cy",(t=>isNaN(t.y)?0:t.y)).attr("r",(t=>isNaN(t.radius)?25:t.radius)).attr("fill",(t=>t.fillColor||"rgba(240, 240, 240, 0.7)")).attr("stroke",(t=>t.strokeColor||"#999")).lower(),e.exit().transition("superdot-exit").duration(650).ease(o.easePolyInOut).style("transform","scale(0)").style("opacity",0).remove(),i.state.svgGroups.dotsGroup.selectAll("circle:not(.superdot)").raise()},e.updateSuperdot=function(t,e,n,o){try{const r=`superdot-${t}`,s=i.state.svgGroups.dotsGroup?.select(`#${r}`);let a=0;i.state.displayData.forEach((t=>{if(t.activeClump===o){const o=(t.x||0)-e,r=(t.y||0)-n,s=Math.sqrt(o*o+r*r)+i.state.dotRadius;a=Math.max(a,s)}}));const c=Math.max(25,2*i.state.dotRadius);let l=0;i.state.displayData.forEach((t=>{t.activeClump===o&&l++}));let u=1.05;l>100&&(u=1.03),l>500&&(u=1.02);const d=Math.max(c,a*u);let p=1.8*Math.sqrt(l);l>1e3&&(p=2.2*Math.sqrt(l));const f=Math.max(d,p,c),g=1.25,h=i.state.superdots.find((t=>t.id===r)),y=h&&h.initialRadius?Math.min(f,h.initialRadius*g):f;s&&!s.empty()&&(s.attr("cx",e).attr("cy",n).attr("r",y).attr("stroke-width",4).lower(),h&&(h.x=e,h.y=n,h.radius=y))}catch(t){console.warn(`Error updating superdot: ${t}`)}};const o=window.d3,i=n(569),r=n(114);function s(t,e){const n=i.state.superdots.find((e=>e.groupIndex===t.groupIndex));if(n)return n.x=t.x,n.y=t.y,n;let r=0;const s=e;i.state.displayData.forEach((e=>{if(e.activeClump===s){const n=(e.x||0)-t.x,o=(e.y||0)-t.y,s=Math.sqrt(n*n+o*o)+i.state.dotRadius;r=Math.max(r,s)}}));const a=Math.max(25,2*i.state.dotRadius);let c=0;i.state.displayData.forEach((t=>{t.activeClump===s&&c++}));let l=1.05;c>100&&(l=1.03),c>500&&(l=1.02);const u=Math.max(a,r*l);let d=1.8*Math.sqrt(c);c>1e3&&(d=2.2*Math.sqrt(c));const p=Math.max(u,d,a);let f=0,g=0,h=0,y=0;i.state.displayData.forEach((t=>{if(t.activeClump===s){const e=o.color(t.type.color);if(e){const t=o.rgb(e);f+=t.r,g+=t.g,h+=t.b,y++}}}));let O="#999";if(y>0){const t=Math.round(f/y),e=Math.round(g/y),n=Math.round(h/y),i=.5;O=o.rgb(Math.min(255,t*(1-i)+255*i),Math.min(255,e*(1-i)+255*i),Math.min(255,n*(1-i)+255*i)).toString()}const m={id:`superdot-${t.groupIndex}`,groupIndex:t.groupIndex,x:t.x,y:t.y,radius:p,initialRadius:p,fillColor:"rgb(246, 246, 246)",strokeColor:O};return i.state.superdots.push(m),m}},613:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VoterGroup=e.VoterType=void 0,window.d3,e.VoterType=class{id;name;color;dotCount;constructor(t,e,n){this.id=t,this.name=e,this.color=n,this.dotCount=0}belongsInClump(t){return t.group.containsType(this)}belongsInView(t){return t.clumps.some((t=>this.belongsInClump(t)))}matchedClumpInView(t){return t.clumps.find((t=>this.belongsInClump(t)))}belongsInGroups(t){return t.some((t=>t.containsType(this)))}};class n{types;id;name;dotCount;constructor(t,e,n){this.types=t,this.id=e,this.name=n,this.dotCount=this.getDotCount()}updateDotCount(){this.dotCount=this.getDotCount()}getDotCount(){return this.types.reduce(((t,e)=>t+e.dotCount),0)}containsType(t){return this.types.includes(t)}shouldIncludeDot(t){return this.types.includes(t.type)}belongsInView(t){return t.clumps.some((t=>this.belongsInClump(t)))}belongsInClump(t){return this.types.some((e=>t.group.containsType(e)))}indexInClump(t){return t.group.types.findIndex((e=>t.group.containsType(e)))}static fromType(t){return new n([t],t.id,t.name)}static fromTypes(t,e,o){return new n(t,e??t.map((t=>t.id)).join("-"),o??t.map((t=>t.name)).join(" + "))}static fromGroups(t,e,o){return new n(t.flatMap((t=>t.types)),e??t.map((t=>t.id)).join("-"),o??t.map((t=>t.name)).join(" + "))}}e.VoterGroup=n},306:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.viewPresets=void 0;const o=n(613),i=n(921),r=n(569);e.viewPresets={everyoneCloud:{description:"Everyone in a single big cloud",dotRadius:2,forceStrength:{charge:-3,collide:3},clumps:[{group:i.VOTER_GROUPS.EVERYONE,force:{type:"custom",center:{x:r.state.svgWidth/2,y:r.state.svgHeight/2}}}]},everyoneRadial:{description:"Everyone mixed in a single big radial",dotRadius:2,forceStrength:{charge:-3,collide:3},clumps:[{group:o.VoterGroup.fromGroups([i.VOTER_GROUPS.NON_DONATING_VOTERS,i.VOTER_GROUPS.ELIGIBLE_NON_VOTERS]),force:{type:"radial",boundary:{inner:0,outer:1500}}}]},allVotersCloud:{description:"All Voters in a single cloud, with non-voters orbiting paler",dotRadius:5,forceStrength:{charge:-5},clumps:[{group:i.VOTER_GROUPS.ELIGIBLE_NON_VOTERS,force:{type:"radial",boundary:{inner:400,outer:1500}},render:{opacity:.3}},{group:i.VOTER_GROUPS.ALL_VOTERS,force:{type:"custom"}}]},onlyVotersBullseye:{description:"Only voters in a bullseye pattern",dotRadius:5,forceStrength:{charge:-5},clumps:[{group:i.VOTER_GROUPS.DONORS_OVER_1000,force:{type:"radial",boundary:{inner:0,outer:50}}},{group:i.VOTER_GROUPS.DONORS_1_999,force:{type:"radial",boundary:{inner:60,outer:100}}},{group:i.VOTER_GROUPS.NON_DONATING_VOTERS,force:{type:"radial",boundary:{inner:150,outer:300}}}]},donorFlowParties:{description:"View for the current donor flow visualization",dotRadius:7,forceStrength:{},links:{partyLinks:!0,parliamentLinks:!1},clumps:[{group:i.VOTER_GROUPS.DONORS_1_999,force:{type:"custom",center:{x:250,y:350}}},{group:i.VOTER_GROUPS.DONORS_OVER_1000,force:{type:"custom",center:{x:450,y:350}}},{group:i.VOTER_GROUPS.NON_DONATING_VOTERS,render:{opacity:.3},force:{type:"radial",boundary:{inner:500,outer:1500}}}]},donorFlowGovernment:{description:"View for the current donor flow visualization",dotRadius:7,forceStrength:{},links:{parliamentLinks:!0},clumps:[{group:i.VOTER_GROUPS.DONORS_1_999,force:{type:"custom",center:{x:250,y:350}}},{group:i.VOTER_GROUPS.DONORS_OVER_1000,force:{type:"custom",center:{x:450,y:350}}},{group:i.VOTER_GROUPS.NON_DONATING_VOTERS,render:{opacity:.3},force:{type:"radial",boundary:{inner:500,outer:1500}}}]},donorFlowPerVote:{description:"View for the current donor flow visualization",dotRadius:1,forceStrength:{},links:{partyLinks:!0,parliamentLinks:!0,finalLinks:!0},clumps:[{group:o.VoterGroup.fromGroups([i.VOTER_GROUPS.DONORS_1_999,i.VOTER_GROUPS.DONORS_OVER_1000,i.VOTER_GROUPS.NON_DONATING_VOTERS]),force:{type:"custom",center:{x:350,y:400}}}]}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0,(()=>{n(511);const t=n(646),e=n(569),o=n(517),i=n(114),r=n(306),s=n(795);!async function(){e.state.importedData=await(0,t.loadVoterData)("assets/csv/voters.csv"),e.state.flattenedData=(0,t.flattenData)(e.state.importedData),console.log("Imported data:",e.state.importedData),(0,i.initVisualization)("chart1"),(0,o.initSimulation)(),(0,s.initEventListeners)(),(0,e.setView)(r.viewPresets.everyoneCloud)}()})()})();